# ArU-code蔵スターシステムR モックアプリ実装計画

## プロジェクト概要
ArU-code蔵スターシステムRの現行画面（IMG_1〜7）をHTMLで再現したモックアプリケーション。
画像を参考に、実際に動作するHTMLモックを作成し、今後の改修案と比較検討できるインタラクティブなプレビュー環境を構築する。

### 画面方向
- **現行版（IMG_1〜7）**: 横画面（ランドスケープ）表示 - 736px × 414px
- **改修版（予定）**: 縦画面（ポートレート）表示 - 375px × 667px

### 開発アプローチ
1. **Phase 1（完了）**: 基本構造の実装
2. **Phase 2（完了）**: IMG_1〜7を横画面レイアウトでHTMLモック作成
3. **Phase 3（今後）**: 完成したHTMLを縦画面レイアウトに改修
4. **Phase 4（今後）**: モード切り替え機能（量販モード/DCモード）の実装

## 画面構成（IMG_1〜7）

### IMG_1: ログイン画面
- **概要**: アプリケーション起動画面
- **要素**:
  - タイトル: ArU-code蔵スターシステムR
  - バージョン表示: Ver.1.0.4
  - ユーザーID入力欄（7桁）
  - パスワード入力欄
  - ログインボタン（青色、WiFiアイコン付き）
  - 設定アイコン（右上）

### IMG_2: メニュー選択画面
- **概要**: 主要機能の選択画面
- **要素**:
  - 戻るボタン（左上、青色丸）
  - タイトル: メニュー選択
  - **モード切り替えスイッチ: 量販モード/DCモード（縦画面版で実装予定）**
  - 大ボタン1: 仕分け管理（青色）
  - 大ボタン2: 送り状管理（青色）
  - フッターアイコン: 設定、情報、ユーザー（右下）

### IMG_3: 機能選択画面（仕分け管理）
- **概要**: 仕分け管理内の機能選択
- **要素**:
  - 戻るボタン（左上）
  - タイトル: 機能選択（仕分け管理）
  - 大ボタン1: 仕分け登録（青色）
  - 大ボタン2: 個口検索（青色）
  - フッターアイコン: 設定、情報、ユーザー

### IMG_4: 仕分け登録（検索条件）
- **概要**: 仕分け対象データの検索条件入力画面
- **要素**:
  - 戻るボタン（左上）
  - タイトル: 仕分け登録（検索条件）
  - 出荷日フィールド（日付: 26/02/16、青色テキスト）
  - 納品日フィールド
  - 運送便CDフィールド
  - **検索条件セクション**（黄色背景）:
    - 運送便種別: フィット便、路線便、宅配便（チェックボックス）
    - 温度帯: 常温、チルド、冷凍（チェックボックス）
    - 荷姿: ケース、バラ（チェックボックス）
  - **仕分け内容セクション**（黄色背景）
  - 検索ボタン（青色、WiFiアイコン付き）

### IMG_5: 仕分け登録（選択開始）
- **概要**: 検索結果のリスト表示と選択画面
- **要素**:
  - 戻るボタン（左上）
  - タイトル: 仕分け登録（選択開始）
  - オレンジ色ヘッダーバー
  - 全選択チェックボックス（左上）
  - テーブル列:
    - 運送便（156: カトーレック FIT便）
    - 着店（AC02**, AC03**など）
    - 温度帯（常温/チルド/...）
    - 荷姿（ケース/バラ）
    - 出荷（02/13）
    - 納品（02/14）
    - 方面（P4:P4など）
  - 各行にチェックボックス
  - 開始ボタン（青色、WiFiアイコン付き、下部）

### IMG_6: 機能選択（送り状管理）
- **概要**: 送り状管理の機能選択
- **要素**:
  - 戻るボタン（左上）
  - タイトル: 機能選択（送り状管理）
  - 大ボタン: 送り状仕分け（青色）
  - フッターアイコン: 設定、情報、ユーザー

### IMG_7: 仕分け登録実行画面
- **概要**: 仕分け作業の進捗表示画面
- **要素**:
  - 戻るボタン（左上、青色）
  - タイトル: 仕分け登録
  - ゴミ箱アイコン（右上、青色）
  - 木目調背景
  - 情報表示:
    - 開始時仕分数（済/総）: 0/30
    - 開始後仕分数: 0
    - 残数: 30
    - 新規アラート
    - 対象外アラート
    - 着店非表示
    - 対象外: なし
  - 完了ボタン（青色、WiFiアイコン付き、右下）

## 画面遷移フロー

### 遷移マップ
```
IMG_1 (ログイン)
    ↓ [ログインボタン]
IMG_2 (メニュー選択)
    ├─ [仕分け管理] → IMG_3 (機能選択: 仕分け管理)
    │                    ├─ [仕分け登録] → IMG_4 (検索条件)
    │                    └─ [個口検索] → IMG_4 (検索条件)
    │
    └─ [送り状管理] → IMG_6 (機能選択: 送り状管理)
                         └─ [送り状仕分け] → IMG_4 (検索条件)

IMG_4 (検索条件)
    ↓ [検索ボタン]
IMG_5 (選択開始)
    ↓ [開始ボタン]
IMG_7 (仕分け登録実行)
```

### 遷移詳細

#### 1. ログイン → メニュー選択
- **起点**: IMG_1 (ログイン画面)
- **アクション**: ログインボタン押下
- **遷移先**: IMG_2 (メニュー選択)

#### 2. メニュー選択 → 機能選択
- **起点**: IMG_2 (メニュー選択)
- **分岐1**: 仕分け管理ボタン → IMG_3 (機能選択: 仕分け管理)
- **分岐2**: 送り状管理ボタン → IMG_6 (機能選択: 送り状管理)

#### 3. 機能選択 → 検索条件
- **起点**: IMG_3 または IMG_6
- **IMG_3からの遷移**:
  - 仕分け登録ボタン → IMG_4 (検索条件)
  - 個口検索ボタン → IMG_4 (検索条件)
- **IMG_6からの遷移**:
  - 送り状仕分けボタン → IMG_4 (検索条件)
- **注意**: 複数の起点から同じIMG_4に集約される

#### 4. 検索条件 → 選択開始
- **起点**: IMG_4 (検索条件)
- **アクション**: 検索ボタン押下
- **遷移先**: IMG_5 (選択開始)

#### 5. 選択開始 → 仕分け実行
- **起点**: IMG_5 (選択開始)
- **アクション**: 開始ボタン押下
- **遷移先**: IMG_7 (仕分け登録実行)

### 戻る動線
- 各画面左上の戻るボタンで前画面に戻る
- IMG_2の戻るボタンはIMG_1（ログイン）に戻るか確認が必要
- IMG_7の戻るボタンは作業中断の確認ダイアログが必要と思われる

## モード切り替え機能（量販モード/DCモード）

### 概要
- **実装時期**: 縦画面版への改修後に実装予定
- **配置場所**: IMG_2（メニュー選択画面）
- **機能**: アプリケーションの動作モードを「量販モード」と「DCモード」で切り替える

### UI設計（予定）

#### 配置
- **位置**: 画面下部（フッター部分、フッターアイコンの上または近く）
- **スタイル**: トグルスイッチまたはセグメントコントロール

#### デザイン案
```
┌────────────────────────────────┐
│ ◀  メニュー選択                │
├────────────────────────────────┤
│                                │
│      [仕分け管理]              │
│                                │
│      [送り状管理]              │
│                                │
│                                │
│  ┌──────────┬──────────┐       │
│  │ 量販モード │ DCモード │       │
│  └──────────┴──────────┘       │
│  (トグルスイッチまたはセグメント) │
│                                │
│                    ⚙️ ℹ️ 👤   │
└────────────────────────────────┘
```

### 機能仕様（予定）

#### 動作
1. **デフォルト**: ログイン後は量販モード（または前回の選択を保持）
2. **切り替え**: タップで即座にモード変更
3. **保持**: 選択したモードはローカルストレージに保存し、次回起動時も維持

#### モード別の動作差異
- **量販モード**: （詳細は今後定義）
- **DCモード**: （詳細は今後定義）

※ 各モードでの具体的な動作の違いは、縦画面版実装時に詳細を確定する

### 技術実装（予定）

#### HTML構造
```html
<div class="mode-switch-container">
  <div class="mode-switch">
    <button class="mode-btn active" data-mode="retail">量販モード</button>
    <button class="mode-btn" data-mode="dc">DCモード</button>
  </div>
</div>
```

#### CSS
```css
.mode-switch-container {
  padding: 15px 20px;
  text-align: center;
}

.mode-switch {
  display: inline-flex;
  background: #e0e0e0;
  border-radius: 25px;
  overflow: hidden;
}

.mode-btn {
  padding: 10px 30px;
  border: none;
  background: transparent;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.mode-btn.active {
  background: #1E90FF;
  color: white;
}
```

#### JavaScript
```javascript
// モード管理
let currentMode = localStorage.getItem('appMode') || 'retail';

// モード切り替え
function switchMode(mode) {
  currentMode = mode;
  localStorage.setItem('appMode', mode);

  // UI更新
  document.querySelectorAll('.mode-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.mode === mode);
  });

  // モードに応じた動作変更
  applyModeSettings(mode);
}

// モード設定の適用
function applyModeSettings(mode) {
  if (mode === 'retail') {
    // 量販モードの設定
  } else if (mode === 'dc') {
    // DCモードの設定
  }
}
```

### 検討事項
- [ ] 各モードの具体的な動作差異の定義
- [ ] モード切り替え時のアニメーション
- [ ] モード変更時の確認ダイアログの必要性
- [ ] 作業中のモード変更の制限（IMG_7実行中など）
- [ ] モード表示の視認性向上（現在のモードを常に表示）

## 技術実装計画

### 1. HTML構造（index.html）
- **スマートフォンレイアウト**:
  - iPhoneフレーム（既存）を活用
  - 画面サイズ: モバイル最適化（375px × 667px想定）
- **ナビゲーション**:
  - 画面遷移システム（7画面）
  - 前へ/次へボタンでページング
  - 現行/改修後トグルスイッチ

### 2. CSS設計（css/style.css）
- **既存スタイルの活用**: 現在のphone-frame、header等を継承
- **新規追加スタイル**:
  - ログイン画面レイアウト
  - メニューボタン（大型青色ボタン）
  - テーブルレイアウト（IMG_5用）
  - チェックボックス統一デザイン
  - 黄色セクション背景
  - オレンジ色ヘッダー
  - 木目調背景（IMG_7用）
  - フッターアイコンバー
  - 戻るボタン（青丸）
  - WiFiアイコン付きボタン

### 3. JavaScript実装（js/app.js）
- **画面管理**:
  ```javascript
  const screenFlow = {
    'IMG_1': { // ログイン
      next: 'IMG_2',
      back: null
    },
    'IMG_2': { // メニュー選択
      next: ['IMG_3', 'IMG_6'], // 仕分け管理 or 送り状管理
      back: 'IMG_1'
    },
    'IMG_3': { // 機能選択（仕分け管理）
      next: 'IMG_4', // 仕分け登録 or 個口検索
      back: 'IMG_2'
    },
    'IMG_4': { // 検索条件
      next: 'IMG_5',
      back: ['IMG_3', 'IMG_6'] // 起点により異なる
    },
    'IMG_5': { // 選択開始
      next: 'IMG_7',
      back: 'IMG_4'
    },
    'IMG_6': { // 機能選択（送り状管理）
      next: 'IMG_4',
      back: 'IMG_2'
    },
    'IMG_7': { // 仕分け実行
      next: null,
      back: 'IMG_5'
    }
  };
  ```
- **機能**:
  - 画面遷移ロジック（フロー制御）
  - トグルスイッチ制御（現行/改修後）
  - ページインジケーター更新
  - 画像プリロード
  - レスポンシブ対応
  - 戻るボタンの履歴管理

### 4. ディレクトリ構成
```
ArU-code-pre-app/
├── index.html
├── css/
│   └── style.css
├── js/
│   └── app.js
└── images/
    ├── current/
    │   ├── IMG_1.PNG ... IMG_7.PNG
    └── updated/  (今後追加)
```

## 実装フェーズ

### Phase 1: 基本表示機能（現行）
- [x] 既存フレームワークの確認
- [ ] IMG_1〜7の画像表示
- [ ] 画面遷移機能
  - [ ] フロー制御（IMG_1→IMG_2→IMG_3/IMG_6→IMG_4→IMG_5→IMG_7）
  - [ ] 戻るボタンの実装
  - [ ] 前へ/次へボタンでの順次表示（開発用）
- [ ] ページインジケーター
- [ ] トグルスイッチUI（機能は未実装）

### Phase 2: インタラクティブ機能
- [ ] トグルスイッチ動作実装
- [ ] 画像一覧サムネイル表示
- [ ] サムネイルクリックでジャンプ
- [ ] キーボードナビゲーション対応

### Phase 3: 改修版対応準備
- [ ] images/updated/ フォルダ準備
- [ ] トグルスイッチで現行⇔改修後切り替え
- [ ] 差分表示機能（検討）
- [ ] コメント・注釈機能（検討）

### Phase 4: 拡張機能（縦画面版完成後）
- [ ] **モード切り替え機能（量販モード/DCモード）の実装**
  - [ ] IMG_2へのスイッチUI追加
  - [ ] モード状態管理（LocalStorage）
  - [ ] モード別の動作実装
  - [ ] モード切り替え時の処理
- [ ] 画面比較モード（並列表示）
- [ ] フィードバック機能
- [ ] 画面遷移フロー図
- [ ] エクスポート機能（PDF等）

## 注意事項
- **モック目的**: 実際のバックエンド連携は不要
- **HTMLモック**: 画像を参考に1つのHTMLアプリとして再現する
- **段階的開発**: 横画面版を完成させてから縦画面に改修
- **シンプル構造**: 比較機能は不要、1つのindex.htmlで完結
- **インタラクティブ**: ボタン、入力フィールド、チェックボックスなどを実装

## 今後の改修予定
1. ✅ 横画面版の完成（IMG_1〜7すべてのHTML化）
2. 縦画面レイアウトへの改修
3. モード切り替え機能（量販モード/DCモード）の実装
4. UI/UX改善の実装
